function scroll(){document.body.scrollTop=0,document.documentElement.scrollTop=0}function PinSearch(e,t){var i,a;if(1==e?(i=document.getElementById("pininput1").value,a=document.getElementById("StateToPin1")):0==e&&(i=document.getElementById("pininput0").value,a=document.getElementById("StateToPin0")),validatePin(i)){sessionStorage.setItem("pin",i),sessionStorage.removeItem("currentState"),sessionStorage.removeItem("currentDistrict"),history.pushState({},"",`${window.location.pathname}?pin=${i}&y`);let a=document.getElementById("dateResults");results.getData(e,3,()=>{plotData(3),t()});let s=`${i} Available Slots`;document.title=s,a.innerHTML="",a.innerHTML+='<div class="d-flex justify-content-center">\n        <div class="spinner-border text-primary" role="status">\n          <span class="sr-only">Loading...</span>\n        </div>\n      </div>'}else a.innerHTML=`<label>Pincode</label>\n        <input class="form-control mr-sm-2 bg-white text-black is-invalid" id="pininput${e}" type="pincode" placeholder="Pincode" value="${i}" aria-label="pincode" oninput="PinValid(${e})">\n        <div class="invalid-feedback" id="invalid-feedback" style="font-size: medium;!important border:thick">Invalid pinCode! Please enter valid Pincode.</div>\n        <button class="btn btn-success my-2 my-sm-0 "  id="PinButton" type="submit">Search</button>`,PreLoadActive&&removePreload()}function removePreload(){$("#PreLoad").removeClass("d-flex justify-content-center align-items-center"),$("#PreLoad").css("display","none"),$("#mynavbartop,#scroll,#h1,#info,#MainContent").css("display",""),$("body").css("overflow","auto"),PreLoadActive=!1}function addPreLoad(){PreLoadActive=!0,$("#PreLoad").addClass("d-flex justify-content-center align-items-center "),$("#PreLoad").css("display","block"),$("#mynavbartop,#scroll,#h1,#info,#MainContent").css("display","none"),$("body").css("overflow","hidden")}function StoreStates(e){let t=new Map,i=new Map;for(let a=0;a<e.length;a++)t.set(e[a].state_id,e[a].state_name.trim()),i.set(e[a].state_name.trim(),e[a].state_id);return{GetName:function(e){return t.get(Number(e))},GetId:function(e){return i.get(e)},All:function(){return e}}}function StoreDistricts(e,t){let i=new Map,a=new Map;for(let t=0;t<e.length;t++)i.set(e[t].district_id,e[t].district_name.trim()),a.set(e[t].district_name.trim(),e[t].district_id);return{state_id:t,state_name:states.GetName(t),GetName:function(e){return i.get(Number(e))},GetId:function(e){return a.get(e.trim())},All:function(){return e}}}var states,districts;function querySearch(){let e=new URLSearchParams(window.location.search),t=e.get("dist"),i=e.get("state"),a=e.get("pin");if(e.has("dist")){if(e.has("y"))if(void 0!==districts){let e=!1,a=districts.GetName(t);if(a&&(e=!0),e){loadStates(1,i),loadDistricts(1,t),formSubmit(1,2,removePreload);let e=`${a} Available slots`;document.title=e}else{loadStates(1,i),loadStates(0);let e=!1;initDistricts(i,()=>{district.setAttribute("disabled","disabled"),document.getElementById("DistrictSubmit1").setAttribute("disabled","disabled"),district.innerHTML="",loadDistricts(1,i),e=!0,loadDistricts(0),formSubmit(1,2,removePreload),district.removeAttribute("disabled"),document.getElementById("DistrictSubmit1").removeAttribute("disabled");let s=`${a=districts.GetName(t)} Available slots`;document.title=s}),e||(district.setAttribute("disabled","disabled"),document.getElementById("DistrictSubmit1").setAttribute("disabled","disabled"))}}else{let e=!1;initStates(()=>{document.getElementById("district1").setAttribute("disabled","disabled"),initDistricts(i,()=>{e=!0,loadDistricts(1,t),loadDistricts(0),formSubmit(1,2,removePreload),document.getElementById("DistrictSubmit1").removeAttribute("disabled"),document.getElementById("district1").removeAttribute("disabled");let i=`${districts.GetName(t)} Available slots`;document.title=i}),loadStates(1,i),loadStates(0)}),e||document.getElementById("DistrictSubmit1").setAttribute("disabled","disabled")}else if(e.has("n")){let a=e.get("date");initStates(()=>{initDistricts(i,()=>{results.getData(1,2,()=>{plotData(4,a),removePreload()},!0,t),loadDistricts(0,t);let e=districts.GetName(t);newtitle=`Vaccination Centers in ${e} on ${a}`,document.title=newtitle}),loadStates(0,i)})}}else if(e.has("pin"))if(e.has("y")){SwithToPin();let t=e.get("pin");document.getElementById("pininput1").value=t,PinSearch(1,removePreload)}else if(e.has("n")){let s=e.get("date");initStates(()=>{initDistricts(1,()=>{results.getData(1,3,()=>{plotData(4,s),removePreload()},!0,a),loadDistricts(0,t)}),loadStates(0,i)}),newtitle=`Vaccination Centers in ${a} on ${s}`,document.title=newtitle}}$(window).bind("beforeunload",function(){sessionStorage.clear()}),$(window).bind("popstate",function(){let e=new URLSearchParams(window.location.search),t=e.get("state"),i=e.get("dist"),a=e.get("pin"),s=e.get("date"),n=!!a;if(e.has("y")){let e=document.getElementById("dateResults");if(e)if(e.innerHTML="",n){SwithToPin();let e=document.getElementById("pininput1");e?(e.value=a,PinSearch(1,removePreload)):removePreload()}else if(SwithToDistrict(),void 0!==districts){let e=!1,a=districts.GetName(i);if(a&&(e=!0),e){loadStates(1,t),loadDistricts(1,i),formSubmit(1,2,removePreload);let e=`${a} Available slots`;document.title=e}else{loadStates(1,t),loadStates(0);let e=!1;initDistricts(t,()=>{document.getElementById("district1").setAttribute("disabled","disabled"),document.getElementById("DistrictSubmit1").setAttribute("disabled","disabled"),document.getElementById("district1").innerHTML="",e=!0,loadDistricts(1,t),loadDistricts(0),formSubmit(1,2,removePreload),document.getElementById("district1").removeAttribute("disabled"),document.getElementById("DistrictSubmit1").removeAttribute("disabled")}),e||(document.getElementById("district1").setAttribute("disabled","disabled"),document.getElementById("DistrictSubmit1").setAttribute("disabled","disabled"));let s=`${a=districts.GetName(i)} Available slots`;document.title=s}}else{let e=!1;initStates(()=>{document.getElementById("district1").setAttribute("disabled","disabled"),initDistricts(t,()=>{e=!0,loadDistricts(1,i),loadDistricts(0),formSubmit(1,2,removePreload),document.getElementById("DistrictSubmit1").removeAttribute("disabled"),document.getElementById("district1").removeAttribute("disabled")}),loadStates(1,t),loadStates(0)}),e||document.getElementById("DistrictSubmit1").setAttribute("disabled","disabled");let a=districts.GetName(i);if(!a){let e=`${a} Available slots`;document.title=e}}else{$('[data-toggle="popover"]').popover("hide"),$("#ad").popover("dispose");let e=document.getElementById("MainContent");if(e.innerHTML="",e.innerHTML=`<div class="container h-100" id="start">\n                    <div class=" d-flex justify-content-center align-items-center">\n                                <a href="javascript:" >\n                                <button class="btn Button-clicked" id="flexDistrict" onclick="SwithToDistrict()">District</button>\n                                </a>\n                                <a href="javascript:" >\n                                <button class="btn btn-secondary" id="flexPincode" onclick="SwithToPin()">Pincode</button>\n                                </a>\n                    </div>\n                    <div class="d-flex h-100 justify-content-center align-items-center" id="BeforeStateToPin">\n                        <form class="form-group " id="StateToPin1">\n                            <div class="form-group " id="0statechange">\n                            <label for="state">State</label>\n                            <select class="form-control" id="state1" onchange="stateSelected(this.value,1)">\n                            </select>\n                            </div>\n                            <div class="form-group" id="mydiv1">\n                            <label for="District">District</label>\n                            <select class="form-control" id="district1">\n                            </select>\n                            </div>\n                            <div class="form-group col-sm-4">\n                            <button class="btn btn-success my-2 my-sm-0" type="submit" id="DistrictSubmit1" >Search</button>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n                <div class="container h-100">\n                    <div class="d-flex h-100 align-items-center justify-content-center">\n                        <div class="font-weight-bold">Filters</div>\n                    </div>\n                </div>\n                ${addFilterButtons()}\n                </br>\n                <div id="res">\n                <div id="dateResults" class="container h-100">\n                </div>\n                </div>`,n){SwithToPin(),document.getElementById("pininput1").value=a,PinSearch(1,removePreload)}else loadStates(1,t),loadDistricts(1,i),formSubmit(1,2,removePreload)}}else results.GetCopy()?(plotData(4,s),removePreload()):n?results.getData(1,3,()=>{plotData(4,s),removePreload()}):results.getData(1,2,()=>{plotData(4,s),removePreload()})}),$(window).on("load",()=>{$(document).on("click","#agefilter,#vaccinefilter,#feefilter,#dosefilter,#ad,#dateShift,#gobackanchor,#PinButton0,#DistrictSubmit0",function(){$('[data-toggle="popover"]').popover("hide"),$("#ad").popover("dispose")}),$(document).on("click","#closePopover",function(){$('[data-toggle="popover"]').popover("hide"),$("#ad").popover("dispose")}),$(document).on("click","#DistrictSubmit1",function(e){e.preventDefault(),formSubmit(1,2)}),$(document).on("click","#DistrictSubmit0",function(e){e.preventDefault(),formSubmit(0,2)}),$(document).on("click","#PinButton1",function(e){e.preventDefault(),PinSearch(1)}),$(document).on("click","#PinButton0",function(e){e.preventDefault(),PinSearch(0)}),$("#Retry").on("click",()=>{})});var PreLoadActive=!1;function SwithToPin(){if(document.getElementById("0statechange")){var e=document.getElementById("flexPincode");e.setAttribute("class","btn Button-clicked"),(e=document.getElementById("flexDistrict")).setAttribute("class","btn btn-secondary");for(var t=document.getElementById("StateToPin1");t.firstChild;)t.removeChild(t.firstChild);t.innerHTML='\n        <label>Pincode</label>\n        <input class="form-control mr-sm-2 bg-white text-black" id="pininput1" type="pincode" placeholder="Pincode" aria-label="pincode" oninput="PinValid(1)"></br>\n        <button class="btn btn-success my-2 my-sm-0" type="submit" id="PinButton1">Search</button>';let i=document.getElementById("dateResults");i&&(i.innerHTML="")}}function SwithToDistrict(){if(document.getElementById("pininput1")){var e=document.getElementById("flexPincode");e.setAttribute("class","btn btn-secondary"),(e=document.getElementById("flexDistrict")).setAttribute("class","btn Button-clicked");for(var t=document.getElementById("StateToPin1");t.firstChild;)t.removeChild(t.firstChild);if(t.innerHTML='<div class="form-group " id="0statechange">\n        <label for="state">State</label>\n        <select class="form-control" id="state1" onchange="stateSelected(this.value,1)">\n        </select>\n        </div>\n        <div class="form-group" id="mydiv1">\n        <label for="District">District</label>\n        <select class="form-control" id="district1">\n        </select>\n        </div>\n        <div class="form-group col-sm-4">\n        <button class="btn btn-success my-2 my-sm-0" type="submit" id="DistrictSubmit1" >Search</button>\n        </div>',void 0!==states&&void 0!==districts)loadStates(1,sessionStorage.getItem("currentState")),loadDistricts(1);else if(void 0===states&&void 0===districts){let e=!1;initStates(()=>{document.getElementById("district1").setAttribute("disabled","disabled"),initDistricts(1,()=>{loadDistricts(),e=!0,document.getElementById("DistrictSubmit1").removeAttribute("disabled"),document.getElementById("district1").removeAttribute("disabled")}),loadStates()}),e||document.getElementById("DistrictSubmit1").setAttribute("disabled","disabled")}let i=document.getElementById("dateResults");i&&(i.innerHTML="")}}function stateSelected(e,t){e=states.GetId(e);let i=document.getElementById(`district${t}`);initDistricts(e,()=>{i.setAttribute("disabled","disabled"),document.getElementById(`DistrictSubmit${t}`).setAttribute("disabled","disabled"),i.innerHTML="",loadDistricts(t,e),i.removeAttribute("disabled"),document.getElementById(`DistrictSubmit${t}`).removeAttribute("disabled")}),i.setAttribute("disabled","disabled"),document.getElementById(`DistrictSubmit${t}`).setAttribute("disabled","disabled"),sessionStorage.setItem("currentState",e)}async function initDistricts(e,t){var i="https://cdn-api.co-vin.in/api/v2/admin/location/districts/";i+=e;try{const a=await fetch(i,{method:"GET",headers:{Accept:"application/json"}});if(!a.ok)throw new Error(a.status);a.text().then(i=>{i=(i=JSON.parse(i)).districts,districts=StoreDistricts(i,e),t()})}catch(e){console.log(e),alert("error : "+e.message)}}async function initStates(e){try{const t=await fetch("https://cdn-api.co-vin.in/api/v2/admin/location/states",{method:"GET",headers:{Accept:"application/json"}});if(!t.ok)throw new Error(t.status);t.text().then(t=>{t=(t=JSON.parse(t)).states,states=StoreStates(t),e()})}catch(e){console.log(e),alert("error : "+e.message)}}function loadStates(e,t){var i,a;void 0===e?(i=document.getElementById("state1"),a=document.getElementById("state0")):1==e?i=document.getElementById("state1"):0==e&&(a=document.getElementById("state0"));let s=window.states.All();for(let o=0;o<s.length;o++){var n=document.createElement("option"),d=document.createElement("option");d.innerHTML=s[o].state_name,n.innerHTML=s[o].state_name,void 0!==t&&t==s[o].state_id&&(n.setAttribute("selected","selected"),d.setAttribute("selected","selected"),sessionStorage.setItem("currentState",t)),void 0===e?(i.appendChild(n),a.appendChild(d)):1==e?i.appendChild(n):0==e&&a.appendChild(d)}}function loadDistricts(e,t){var i,a;void 0===e?(i=document.getElementById("district1"),a=document.getElementById("district0")):1==e?i=document.getElementById("district1"):0==e&&(a=document.getElementById("district0"));let s=window.districts.All();for(let o=0;o<s.length;o++){var n=document.createElement("option"),d=document.createElement("option");n.innerHTML=s[o].district_name,d.innerHTML=s[o].district_name,void 0!==t&&t==s[o].district_id&&(n.setAttribute("selected","selected"),d.setAttribute("selected","selected"),sessionStorage.setItem("currentDistrict",t)),void 0===e?(i.appendChild(n),a.appendChild(d)):1==e?i.appendChild(n):0==e&&a.appendChild(d)}}function alert(e){return`<div class="d-flex align-items-center justify-content-center">\n    <div class="alert alert-danger" role="alert" id="NoDataAlert">${e}</div>\n    </div>`}function changeData(e){if(!(0!=e.date.length&&(Button.isClicked("18+")||Button.isClicked("45+")||Button.isClicked("covishield")||Button.isClicked("covaxin")||Button.isClicked("sputnik v")||Button.isClicked("free")||Button.isClicked("paid")||Button.isClicked("1stDose")||Button.isClicked("2ndDose"))))return e;if(!Button.isClicked("covishield")||Button.isClicked("covaxin")||Button.isClicked("sputnik v")){if(Button.isClicked("covishield")||!Button.isClicked("covaxin")||Button.isClicked("sputnik v")){if(Button.isClicked("covishield")||Button.isClicked("covaxin")||!Button.isClicked("sputnik v")){if(Button.isClicked("covishield")&&Button.isClicked("covaxin")&&!Button.isClicked("sputnik v")){for(let t=0;t<e.date.length;t++)if(e.date[t].hasOwnProperty("vaccine")&&e.date[t].vaccine.hasOwnProperty("SPUTNIK V")&&delete e.date[t].vaccine["SPUTNIK V"],e.date[t].hasOwnProperty("Hospital"))for(let i=0;i<e.date[t].Hospital.length;i++){let a=e.date[t].Hospital.length-1;"SPUTNIK V"==e.date[t].Hospital[i].vaccine&&(e.date[t].total-=e.date[t].Hospital[i]["1stdose"]+e.date[t].Hospital[i]["2nddose"],e.date[t].Hospital.splice(i,1),i!=a&&i--)}}else if(Button.isClicked("covishield")&&!Button.isClicked("covaxin")&&Button.isClicked("sputnik v")){for(let t=0;t<e.date.length;t++)if(e.date[t].hasOwnProperty("vaccine")&&e.date[t].vaccine.hasOwnProperty("COVAXIN")&&delete e.date[t].vaccine.COVAXIN,e.date[t].hasOwnProperty("Hospital"))for(let i=0;i<e.date[t].Hospital.length;i++){let a=e.date[t].Hospital.length-1;"COVAXIN"==e.date[t].Hospital[i].vaccine&&(e.date[t].total-=e.date[t].Hospital[i]["1stdose"]+e.date[t].Hospital[i]["2nddose"],e.date[t].Hospital.splice(i,1),i!=a&&i--)}}else if(!Button.isClicked("covishield")&&Button.isClicked("covaxin")&&Button.isClicked("sputnik v"))for(let t=0;t<e.date.length;t++)if(e.date[t].hasOwnProperty("vaccine")&&e.date[t].vaccine.hasOwnProperty("COVISHIELD")&&delete e.date[t].vaccine.COVISHIELD,e.date[t].hasOwnProperty("Hospital"))for(let i=0;i<e.date[t].Hospital.length;i++){let a=e.date[t].Hospital.length-1;"COVISHIELD"==e.date[t].Hospital[i].vaccine&&(e.date[t].total-=e.date[t].Hospital[i]["1stdose"]+e.date[t].Hospital[i]["2nddose"],e.date[t].Hospital.splice(i,1),i!=a&&i--)}}else for(let t=0;t<e.date.length;t++)if(e.date[t].hasOwnProperty("vaccine")&&(e.date[t].vaccine.hasOwnProperty("COVISHIELD")&&delete e.date[t].vaccine.COVISHIELD,e.date[t].vaccine.hasOwnProperty("COVAXIN")&&delete e.date[t].vaccine.COVAXIN),e.date[t].hasOwnProperty("Hospital"))for(let i=0;i<e.date[t].Hospital.length;i++){let a=e.date[t].Hospital.length-1;"COVAXIN"==e.date[t].Hospital[i].vaccine?(e.date[t].total-=e.date[t].Hospital[i]["1stdose"]+e.date[t].Hospital[i]["2nddose"],e.date[t].Hospital.splice(i,1),i!=a&&i--):"COVISHIELD"==e.date[t].Hospital[i].vaccine&&(e.date[t].total-=e.date[t].Hospital[i]["1stdose"]+e.date[t].Hospital[i]["2nddose"],e.date[t].Hospital.splice(i,1),i!=a&&i--)}}else for(let t=0;t<e.date.length;t++)if(e.date[t].hasOwnProperty("vaccine")&&(e.date[t].vaccine.hasOwnProperty("COVISHIELD")&&delete e.date[t].vaccine.COVISHIELD,e.date[t].vaccine.hasOwnProperty("SPUTNIK V")&&delete e.date[t].vaccine["SPUTNIK V"]),e.date[t].hasOwnProperty("Hospital"))for(let i=0;i<e.date[t].Hospital.length;i++){let a=e.date[t].Hospital.length-1;"COVISHIELD"==e.date[t].Hospital[i].vaccine?(e.date[t].total-=e.date[t].Hospital[i]["1stdose"]+e.date[t].Hospital[i]["2nddose"],e.date[t].Hospital.splice(i,1),i!=a&&i--):"SPUTNIK V"==e.date[t].Hospital[i].vaccine&&(e.date[t].total-=e.date[t].Hospital[i]["1stdose"]+e.date[t].Hospital[i]["2nddose"],e.date[t].Hospital.splice(i,1),i!=a&&i--)}}else for(let t=0;t<e.date.length;t++)if(e.date[t].hasOwnProperty("vaccine")&&(e.date[t].vaccine.hasOwnProperty("COVAXIN")&&delete e.date[t].vaccine.COVAXIN,e.date[t].vaccine.hasOwnProperty("SPUTNIK V")&&delete e.date[t].vaccine["SPUTNIK V"]),e.date[t].hasOwnProperty("Hospital"))for(let i=0;i<e.date[t].Hospital.length;i++){let a=e.date[t].Hospital.length-1;"COVAXIN"==e.date[t].Hospital[i].vaccine?(e.date[t].total-=e.date[t].Hospital[i]["1stdose"]+e.date[t].Hospital[i]["2nddose"],e.date[t].Hospital.splice(i,1),i!=a&&i--):"SPUTNIK V"==e.date[t].Hospital[i].vaccine&&(e.date[t].total-=e.date[t].Hospital[i]["1stdose"]+e.date[t].Hospital[i]["2nddose"],e.date[t].Hospital.splice(i,1),i!=a&&i--)}if(Button.isClicked("18+")&&!Button.isClicked("45+")){for(let t=0;t<e.date.length;t++){let i=Object.getOwnPropertyNames(e.date[t].vaccine);for(let a=0;a<i.length;a++)e.date[t].vaccine[`${i[a]}`].hasOwnProperty(45)&&delete e.date[t].vaccine[`${i[a]}`][45]}for(let t=0;t<e.date.length;t++)for(let i=0;i<e.date[t].Hospital.length;i++){let a=e.date[t].Hospital.length-1;45==e.date[t].Hospital[i].min_age&&(e.date[t].total-=e.date[t].Hospital[i]["1stdose"]+e.date[t].Hospital[i]["2nddose"],e.date[t].Hospital.splice(i,1),i!=a&&i--)}}else if(!Button.isClicked("18+")&&Button.isClicked("45+")){for(let t=0;t<e.date.length;t++){let i=Object.getOwnPropertyNames(e.date[t].vaccine);for(let a=0;a<i.length;a++)e.date[t].vaccine[`${i[a]}`].hasOwnProperty(18)&&delete e.date[t].vaccine[`${i[a]}`][18]}for(let t=0;t<e.date.length;t++)for(let i=0;i<e.date[t].Hospital.length;i++){let a=e.date[t].Hospital.length-1;18==e.date[t].Hospital[i].min_age&&(e.date[t].total-=e.date[t].Hospital[i]["1stdose"]+e.date[t].Hospital[i]["2nddose"],e.date[t].Hospital.splice(i,1),i!=a&&i--)}}if(Button.isClicked("1stDose")&&!Button.isClicked("2ndDose")){for(let t=0;t<e.date.length;t++){let i=Object.getOwnPropertyNames(e.date[t].vaccine);for(let a=0;a<i.length;a++){let s=[18,45];for(let n=0;n<s.length;n++)e.date[t].vaccine[`${i[a]}`].hasOwnProperty(`${s[n]}`)&&e.date[t].vaccine[`${i[a]}`][`${s[n]}`].hasOwnProperty("2nddose")&&delete e.date[t].vaccine[`${i[a]}`][`${s[n]}`]["2nddose"]}}for(let t=0;t<e.date.length;t++)for(let i=0;i<e.date[t].Hospital.length;i++){let a=e.date[t].Hospital.length-1;e.date[t].total-=e.date[t].Hospital[i]["2nddose"],0==e.date[t].Hospital[i]["1stdose"]&&(e.date[t].Hospital.splice(i,1),i!=a&&i--)}}else if(!Button.isClicked("1stDose")&&Button.isClicked("2ndDose")){for(let t=0;t<e.date.length;t++){let i=Object.getOwnPropertyNames(e.date[t].vaccine);for(let a=0;a<i.length;a++){let s=[18,45];for(let n=0;n<s.length;n++)e.date[t].vaccine[`${i[a]}`].hasOwnProperty(`${s[n]}`)&&e.date[t].vaccine[`${i[a]}`][`${s[n]}`].hasOwnProperty("1stdose")&&delete e.date[t].vaccine[`${i[a]}`][`${s[n]}`]["1stdose"]}}for(let t=0;t<e.date.length;t++)for(let i=0;i<e.date[t].Hospital.length;i++){let a=e.date[t].Hospital.length-1;e.date[t].total-=e.date[t].Hospital[i]["1stdose"],0==e.date[t].Hospital[i]["2nddose"]&&(e.date[t].Hospital.splice(i,1),i!=a&&i--)}}if(Button.isClicked("free")&&!Button.isClicked("paid"))for(let t=0;t<e.date.length;t++){let i=Object.getOwnPropertyNames(e.date[t].vaccine);for(let a=0;a<i.length;a++){let s=Object.getOwnPropertyNames(e.date[t].vaccine[`${i[a]}`]);for(let n=0;n<s.length;n++){let d=Object.getOwnPropertyNames(e.date[t].vaccine[`${i[a]}`][`${s[n]}`]);for(let o=0;o<d.length;o++)e.date[t].vaccine[`${i[a]}`][`${s[n]}`][`${d[o]}`].hasOwnProperty("paid")&&delete e.date[t].vaccine[`${i[a]}`][`${s[n]}`][`${d[o]}`].paid}}for(let i=0;i<e.date[t].Hospital.length;i++){let a=e.date[t].Hospital.length-1;"Paid"==e.date[t].Hospital[i].fee_type&&(e.date[t].total-=e.date[t].Hospital[i]["1stdose"]+e.date[t].Hospital[i]["2nddose"],e.date[t].Hospital.splice(i,1),i!=a&&i--)}}else if(!Button.isClicked("free")&&Button.isClicked("paid"))for(let t=0;t<e.date.length;t++){let i=Object.getOwnPropertyNames(e.date[t].vaccine);for(let a=0;a<i.length;a++){let s=Object.getOwnPropertyNames(e.date[t].vaccine[`${i[a]}`]);for(let n=0;n<s.length;n++){let d=Object.getOwnPropertyNames(e.date[t].vaccine[`${i[a]}`][`${s[n]}`]);for(let o=0;o<d.length;o++)e.date[t].vaccine[`${i[a]}`][`${s[n]}`][`${d[o]}`].hasOwnProperty("free")&&delete e.date[t].vaccine[`${i[a]}`][`${s[n]}`][`${d[o]}`].free}}for(let i=0;i<e.date[t].Hospital.length;i++){let a=e.date[t].Hospital.length-1;"Free"==e.date[t].Hospital[i].fee_type&&(e.date[t].total-=e.date[t].Hospital[i]["1stdose"]+e.date[t].Hospital[i]["2nddose"],e.date[t].Hospital.splice(i,1),i!=a&&i--)}}return e}window.addEventListener("DOMContentLoaded",function(){addPreLoad()}),window.addEventListener("pageshow",e=>{if(window.location.search)querySearch();else{let e=!1;initStates(()=>{document.getElementById("district1").setAttribute("disabled","disabled"),initDistricts(1,()=>{loadDistricts(),e=!0,document.getElementById("DistrictSubmit1").removeAttribute("disabled"),document.getElementById("district1").removeAttribute("disabled"),removePreload()}),loadStates()}),e||document.getElementById("DistrictSubmit1").setAttribute("disabled","disabled")}});var results=function(){let e=null,t=!1;return{gotresponse:function(){return t},getData:function(i,a,s,n,d){let o=0;var l=new Date,c=l.getDate()+"-"+(l.getMonth()+1)+"-"+l.getFullYear();if(2==a){let e=document.getElementById(`district${i}`).value,a=0;void 0===n?a=districts.GetId(e):void 0!==n&&n&&(a=d),o="https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/calendarByDistrict?district_id=",o+=a+"&date=",o+=c,t=!1}else{if(3!=a)return;{let e=null;void 0!==n&&n?e=d:void 0===n&&(e=document.getElementById(`pininput${i}`).value),o="https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/calendarByPin?pincode=",o+=e+"&date=",o+=c,t=!1}}let r=document.getElementById("dateResults");const p=new AbortController,u=setTimeout(()=>{results.gotresult=!1,p.abort(),PreLoadActive&&removePreload(),r.innerHTML="",r.innerHTML+=`<div class="modal fade" id="staticBackdrop" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">\n                    <div class="modal-dialog modal-dialog-centered">\n                      <div class="modal-content ">\n                        <div class="modal-header">\n                          <h5 class="modal-title" id="staticBackdropLabel">Error</h5>\n                        </div>\n                        <div class="modal-body">\n                         Could not retrieve data.\n                         please try again.\n                        </div>\n                        <div class="modal-footer">\n                          <button type="button" class="btn btn-primary" data-dismiss="modal" id="Retry" onclick="results.getData(${i},${a},${s},${n},${d})">Try Again</button>\n                        </div>\n                      </div>\n                    </div>\n                  </div>`,$("#staticBackdrop").modal("show"),r.innerHTML+='<div class="d-flex justify-content-center">\n                  <div class="spinner-border text-primary" role="status">\n                    <span class="sr-only">Loading...</span>\n                  </div>\n                </div>'},1e4);fetch(o,{method:"GET",signal:p.signal,headers:{Accept:"application/json"}}).then(e=>{if(e.ok)return clearTimeout(u),results.gotresult=!0,e.text();throw new Error(e.status)}).then(t=>{t=ConvertData(t=(t=JSON.parse(t)).centers),e=t}).then(()=>{s(JSON.parse(JSON.stringify(e)))}).catch(e=>{let t="error : "+e.message;console.log(t)})},filterData:function(){return changeData(JSON.parse(JSON.stringify(e)))},GetCopy:function(){return JSON.parse(JSON.stringify(e))}}}(),Button=function(){let e=!1,t=!1,i=!1,a=!1,s=!1,n=!1,d=!1,o=!1,l=!1;return{click:c=>{let r=!1;if("covishield"==c?(e=!e,t=!1,i=!1):"covaxin"==c?(t=!t,e=!1,i=!1):"sputnik v"==c?(i=!i,e=!1,t=!1):"1stDose"==c?(a=!a,s=!1):"2ndDose"==c?(s=!s,a=!1):"free"==c?(o=!o,l=!1):"paid"==c?(l=!l,o=!1):"18+"==c?(n=!n,d=!1):"45+"==c&&(d=!d,n=!1),"covishield"==c||"covaxin"==c||"sputnik v"==c)for(let e=1;e<4;e++){let t=document.getElementById(`vaccinefilter${e}`),i=document.getElementById("vaccinefilter").innerHTML,a=t.innerHTML;if(c==a.toLowerCase()){$("#vaccinefilter").text(a),$("#vaccinefilter").hasClass("btn-secondary")?($("#vaccinefilter").removeClass("btn-secondary"),$("#vaccinefilter").addClass("Button-clicked")):$("#vaccinefilter").hasClass("Button-clicked")&&i==a&&($("#vaccinefilter").removeClass("Button-clicked"),$("#vaccinefilter").addClass("btn-secondary"));break}}else if("18+"==c||"45+"==c)for(let e=1;e<3;e++){let t=document.getElementById(`agefilter${e}`).innerHTML,i=document.getElementById("agefilter").innerHTML;if(c==t){$("#agefilter").text(t),$("#agefilter").hasClass("btn-secondary")?($("#agefilter").removeClass("btn-secondary"),$("#agefilter").addClass("Button-clicked")):$("#agefilter").hasClass("Button-clicked")&&t==i&&($("#agefilter").removeClass("Button-clicked"),$("#agefilter").addClass("btn-secondary"));break}}else if("free"==c||"paid"==c)for(let e=1;e<3;e++){let t=document.getElementById(`feefilter${e}`).innerHTML,i=document.getElementById("feefilter").innerHTML;if(c==t){$("#feefilter").text(t),$("#feefilter").hasClass("btn-secondary")?($("#feefilter").removeClass("btn-secondary"),$("#feefilter").addClass("Button-clicked")):$("#feefilter").hasClass("Button-clicked")&&t==i&&($("#feefilter").removeClass("Button-clicked"),$("#feefilter").addClass("btn-secondary"));break}}else if("1stDose"==c||"2ndDose"==c)for(let e=1;e<3;e++){let t=document.getElementById(`dosefilter${e}`).innerHTML,i=document.getElementById("dosefilter").innerHTML;if(c==t){$("#dosefilter").text(t),$("#dosefilter").hasClass("btn-secondary")?($("#dosefilter").removeClass("btn-secondary"),$("#dosefilter").addClass("Button-clicked")):$("#dosefilter").hasClass("Button-clicked")&&t==i&&($("#dosefilter").removeClass("Button-clicked"),$("#dosefilter").addClass("btn-secondary"));break}}else r=!0;if(!r){let e=new URLSearchParams(window.location.search);if(e.has("y"))plotData(3);else if(e.has("n")&&e.has("date")){plotData(4,e.get("date"))}}},isClicked:c=>"covishield"==c?e:"covaxin"==c?t:"sputnik v"==c?i:"18+"==c?n:"45+"==c?d:"1stDose"==c?a:"2ndDose"==c?s:"free"==c?o:"paid"==c?l:void 0,filterList:()=>["covishield","covaxin","sputnik v","1stDose","2ndDose","18+","45+","free","paid"]}}();function Nextdate(){let e=document.getElementById("currentdate").innerHTML;if(e){let t=results.GetCopy(),i=new URLSearchParams(window.location.search),a=i.get("dist"),s=i.get("state"),n=i.get("pin"),d=0;for(let i=0;i<t.date.length;i++)if(t.date[i].value==e){d=i;break}if(d>=0&&d<t.date.length-1){n?(history.pushState({},"",`${window.location.pathname}?pin=${n}&n&date=${t.date[d+1].value}`),document.title=`Vaccination Centers in ${n} on ${t.date[d+1].value}`):a&&s&&(history.pushState({},"",`${window.location.pathname}?dist=${a}&state=${s}&n&date=${t.date[d+1].value}`),document.title=`Vaccination Centers in ${districts.GetName(a)} on ${t.date[d+1].value}`);let e=document.getElementById("dateshiftleft");e&&(e.setAttribute("src","img/arrow-left.svg"),document.getElementById("previousdateanchor").setAttribute("class","btn active")),plotData(4,t.date[d+1].value)}else{let e=document.getElementById("dateshiftright");e&&(e.setAttribute("src","img/arrow-right-fill.svg"),document.getElementById("nextdateanchor").setAttribute("class","btn disabled"))}}}function Previousdate(){let e=document.getElementById("currentdate").innerHTML;if(e){let t=results.GetCopy(),i=new URLSearchParams(window.location.search),a=i.get("dist"),s=i.get("state"),n=i.get("pin"),d=0;for(let i=0;i<t.date.length;i++)if(t.date[i].value==e){d=i;break}if(d>0){let e=document.getElementById("dateshiftright");e&&(e.setAttribute("src","img/arrow-right.svg"),document.getElementById("nextdateanchor").setAttribute("class","btn active")),n?(history.pushState({},"",`${window.location.pathname}?pin=${n}&n&date=${t.date[d-1].value}`),document.title=`Vaccination Centers in ${n} on ${t.date[d-1].value}`):a&&s&&(history.pushState({},"",`${window.location.pathname}?dist=${a}&state=${s}&n&date=${t.date[d-1].value}`),document.title=`Vaccination Centers in ${districts.GetName(a)} on ${t.date[d-1].value}`),plotData(4,t.date[d-1].value)}else{let e=document.getElementById("dateshiftleft");e&&(e.setAttribute("src","img/arrow-left-fill.svg"),document.getElementById("previousdateanchor").setAttribute("class"," btn disabled"))}}}function rel(){let e=window.location.protocol+"//";e+=window.location.host+window.location.pathname;let t=document.getElementById("Reload");t&&(t.setAttribute("href",e),t.click())}function formSubmit(e,t,i){if(2==t){sessionStorage.removeItem("pin");let t=document.getElementById(`district${e}`).value,i=`${t} Available Slots`;document.title=i;(t=districts.GetId(t))||(t=districts.All()[0].district_id),sessionStorage.getItem("currentState")||sessionStorage.setItem("currentState",districts.state_id),sessionStorage.setItem("currentDistrict",t),history.pushState({},"",`${window.location.pathname}?dist=${t}&state=${sessionStorage.getItem("currentState")}&y`)}let a=document.getElementById("dateResults");if(results.getData(e,t,()=>{plotData(3),i()}),0==e){let e=document.getElementById("mainContent");document.getElementById("dateResults")||(e.innerHTML="",e.innerHTML='<div class="container h-100" id="start">\n                <div class=" d-flex justify-content-center align-items-center">\n                            <a href="#" >\n                            <button class="btn Button-clicked" id="flexDistrict" onclick="SwithToDistrict()">District</button>\n                            </a>\n                            <a href="#" >\n                                <button class="btn btn-secondary" id="flexPincode" onclick="SwithToPin()">Pincode</button>\n                            </a>\n                </div>\n                <div class="d-flex h-100 justify-content-center align-items-center" id="BeforeStateToPin">\n                    <form class="form-group " id="StateToPin1">\n                        <div class="form-group " id="0statechange">\n                        <label for="state">State</label>\n                        <select class="form-control" id="state1" onchange="stateSelected(this.value,1)">\n                        </select>\n                        </div>\n                        <div class="form-group" id="mydiv1">\n                        <label for="District">District</label>\n                        <select class="form-control" id="district1">\n                        </select>\n                        </div>\n                        <div class="form-group col-sm-4">\n                        <button class="btn btn-success my-2 my-sm-0" type="submit" id="DistrictSubmit1">Search</button>\n                        </div>\n                    </form>\n                </div>\n            </div>\n            <div class="container h-100">\n                <div class="d-flex h-100 align-items-center justify-content-center">\n                    <div class="font-weight-bold">Filters</div>\n                </div>\n            </div>\n            <div class="d-flex align-items-center justify-content-center" id="filters">\n                <div class="btn-group">\n                    <button type="button" id="agefilter" class="btn btn-secondary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n                    18+\n                    </button>\n                    <div class="dropdown-menu">\n                    <a class="dropdown-item" id="agefilter1" href="javascript:Button.click(\'18+\')">18+</a>\n                    <a class="dropdown-item" id="agefilter2" href="javascript:Button.click(\'45+\')">45+</a>\n                    </div>\n                </div>\n                <div class="btn-group">\n                    <button type="button" id="vaccinefilter" class="btn btn-secondary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n                    COVISHIELD\n                    </button>\n                    <div class="dropdown-menu">\n                        <a class="dropdown-item" id="vaccinefilter1" href="javascript:Button.click(\'covishield\')">COVISHIELD</a>\n                    <a class="dropdown-item" id="vaccinefilter2"   href="javascript:Button.click(\'covaxin\')">COVAXIN</a>\n                    <a class="dropdown-item" id="vaccinefilter3"   href="javascript:Button.click(\'sputnik\')">SPUTNIK</a>\n                    </div>\n                </div>\n                <div class="btn-group">\n                    <button type="button" id="feefilter" class="btn btn-secondary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n                    free\n                    </button>\n                    <div class="dropdown-menu">\n                    <a class="dropdown-item" id="feefilter1" href="javascript:Button.click(\'free\')" >free</a>\n                    <a class="dropdown-item" id="feefilter2" href="javascript:Button.click(\'paid\')" >paid</a>\n                    </div>\n                </div>\n                <div class="btn-group">\n                    <button type="button" id="dosefilter" class="btn btn-secondary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n                    1stDose\n                    </button>\n                    <div class="dropdown-menu">\n                    <a class="dropdown-item" id="dosefilter1" href="javascript:Button.click(\'1stDose\')">1stDose</a>\n                    <a class="dropdown-item" id="dosefilter2" href="javascript:Button.click(\'2ndDose\')">2ndDose</a>\n                    </div>\n                </div>\n            </div>\n            </br>\n            <div id="res">\n            <div id="dateResults" class="container h-100">\n            </div>\n            </div>'),SwithToDistrict(),loadStates(1,sessionStorage.getItem("currentState")),loadDistricts(1,sessionStorage.getItem("currentDistrict"))}a?(a.innerHTML="",a.innerHTML+='<div class="d-flex justify-content-center">\n        <div class="spinner-border text-primary" role="status">\n          <span class="sr-only">Loading...</span>\n        </div>\n      </div>'):(a=document.getElementById("res"))&&(a.innerHTML="",a.innerHTML+='<div class="d-flex justify-content-center">\n            <div class="spinner-border text-primary" role="status">\n              <span class="sr-only">Loading...</span>\n            </div>\n          </div>')}function SwitchToHospital(e){let t=new URLSearchParams(window.location.search),i=t.get("dist"),a=t.get("state"),s=t.get("pin");s?history.pushState({},"",`${window.location.pathname}?pin=${s}&n&date=${e}`):i&&a&&history.pushState({},"",`${window.location.pathname}?dist=${i}&state=${a}&n&date=${e}`),plotData(4,e);let n="";if(s)n=`Vaccination centers in ${s} on ${e}`,document.title=n;else if(i&&a){let t="";n=`Vaccination centers in ${t=districts.GetName(i)} on ${e}`,document.title=n}$('[data-toggle="popover"]').popover({placement:"top",html:!0,content:'<a href="javascript:" id="closePopover" class="close btn"data-dismiss="alert">&times;</a><div class="media-body">click here to get more information about this vaccination center</div>'}),$('[data-toggle="popover"]').popover("show")}function plotData(e,t){let i=results.filterData(),a=sessionStorage.getItem("currentState"),s=sessionStorage.getItem("currentDistrict"),n=sessionStorage.getItem("pin"),d=!n,o=window.districts.All(),l=window.states.All();if(3==e){let e=[];var c=document.getElementById("dateResults");if(c)c.innerHTML="";else if(c=document.getElementById("res")){c.innerHTML="";let e=document.createElement("div");e.setAttribute("class","container h-100"),e.setAttribute("id","dateResults"),c.appendChild(e),c=document.getElementById("dateResults")}else{if((c=document.getElementById("MainContent")).innerHTML="",c.innerHTML+=`<div class="container h-100" id="start">\n                 <div class=" d-flex justify-content-center align-items-center">\n                             <a href="#" >\n                             <button class="btn Button-clicked" id="flexDistrict" onclick="SwithToDistrict()">District</button>\n                             </a>\n                             <a href="#" >\n                                 <button class="btn btn-secondary" id="flexPincode" onclick="SwithToPin()">Pincode</button>\n                             </a>\n                 </div>\n                 <div class="d-flex h-100 justify-content-center align-items-center" id="BeforeStateToPin">\n                     <form class="form-group " id="StateToPin1">\n                         <div class="form-group ">\n                         <label for="state">State</label>\n                         <select class="form-control" id="state1" onchange="stateSelected(this.value,1)">\n                         </select>\n                         </div>\n                         <div class="form-group" id="mydiv1">\n                         <label for="District">District</label>\n                         <select class="form-control" id="district1">\n                         </select>\n                         </div>\n                         <div class="form-group col-sm-4">\n                         <button class="btn btn-success my-2 my-sm-0" type="submit" id="DistrictSubmit1">Search</button>\n                         </div>\n                     </form>\n                 </div>\n             </div>\n             <div class="container h-100">\n                 <div class="d-flex h-100 align-items-center justify-content-center">\n                     <div class="font-weight-bold">Filters</div>\n                     </div>\n             </div>${addFilterButtons()}</br>\n                 <div id="res">\n                 <div id="dateResults" class="container h-100">\n                 </div> \n                 </div>`,d){let e=document.getElementById("state1");for(;e.hasChildNodes();)e.removeChild(e.firstChild);for(let t=0;t<l.length;t++){let i=document.createElement("option");a&&l[t].state_id==a&&(a=null,i.setAttribute("selected","selected")),i.innerHTML=l[t].state_name,e.appendChild(i)}for(e=document.getElementById("district1");e.hasChildNodes();)e.removeChild(e.firstChild);for(let t=0;t<o.length;t++){let i=document.createElement("option");s&&o[t].district_id==s&&(s=null,i.setAttribute("selected","selected")),i.innerHTML=o[t].district_name,e.appendChild(i)}}else{SwithToPin(),document.getElementById("pininput1").setAttribute("value",`${n}`)}c=document.getElementById("dateResults")}if(0==i.date.length)return void(c.innerHTML+=alert("no data available for next 7 days"));for(let t=0;t<i.date.length;t++)e.push(i.date[t].value);for(let t=0;t<e.length;t++){let a=0,s=0;for(let a=0;a<i.date.length;a++)if(i.date[a].value==e[t]){s=a;break}(a=i.date[s].total)<=0?(a=0,c.innerHTML+=`<div class="d-flex align-items-center justify-content-center">\n                         <div class="row">\n                             <div class="card text-white bg-secondary mb-3" id="req" >\n                                 <div class="card-header">${e[t]}</div>\n                                 <div class="card-body">\n                                 <h5 class="card-title">Available slots : ${a} <span><a href="javascript:SwitchToHospital('${e[t]}')" class="btn disabled"><img src="img/arrow-right.svg"></img></a></span></h5>\n                                 <p class="card-text">${addBadges(i.date[s].vaccine)}</p>\n                                 </div>\n                                 </div>\n                             </div>\n                         </div>`):a>0&&(c.innerHTML+=`<div class="d-flex align-items-center justify-content-center">\n                         <div class="row">\n                             <div class="card text-white bg-success mb-3" id="req" >\n                                 <div class="card-header">${e[t]}</div>\n                                 <div class="card-body">\n                                 <h5 class="card-title">Available slots : ${a} <span><a href="javascript:SwitchToHospital('${e[t]}')" class="btn active"><img src="img/arrow-right.svg"></img></a></span></h5>\n                                 <p class="card-text">${addBadges(i.date[s].vaccine)}</p>\n                                 </div>\n                                 </div>\n                             </div>\n                         </div>\n                     `)}}else if(4==e){let e=-1;for(let a=0;a<i.date.length;a++)if(i.date[a].value==t){e=a;break}if(-1==e){e=0,t=i.date[e].value;let a=new URLSearchParams(window.location.search);a.has("pin")?history.replaceState({},"",`${window.location.pathname}?pin=${a.get("pin")}&n&date=${t}`):a.has("dist")&&a.has("state")&&history.replaceState({},"",`${window.location.pathname}?dist=${a.get("dist")}&state=${a.get("state")}&n&date=${t}`)}let a=document.getElementById("hospitalResults");if(a){if(document.getElementById("currentdate").innerHTML=`${t}`,a.innerHTML="",0==i.date[e].Hospital.length)return void(Button.isClicked("18+")||Button.isClicked("45+")||Button.isClicked("covishield")||Button.isClicked("covaxin")||Button.isClicked("sputnik")||Button.isClicked("free")||Button.isClicked("paid")||Button.isClicked("1stDose")||Button.isClicked("2ndDose")?a.innerHTML+=alert("No Data of Vaccination centers available for current set of filters."):a.innerHTML+=alert("No Data of Vaccination centers available"));a.innerHTML+='<div class="d-flex p-2 align-items-center justify-content-center"><div class="accordion" id="HospitalRes"></div></div>',(a=document.getElementById("HospitalRes")).innerHTML="",a.innerHTML+=`<div class="card " data-toggle="popover" id="ad" onclick="DelegateClick(0)"><div class="d-flex card-header ${i.date[e].Hospital[0]["1stdose"]>0||i.date[e].Hospital[0]["2nddose"]>0?"btn-success":"btn-secondary"} align-items-center justify-content-center" id="Hospital0" ><h2 class="mb-0" ><button class="btn collapsed" id="HospitalName0" type="button" data-toggle="collapse" data-target="#Hospitaldetails0" aria-expanded="false" aria-controls="Hospitaldetails0">${i.date[e].Hospital[0].name}</button></h2></div><div id="Hospitaldetails0" class="collapse" aria-labelledby="Hospital0" data-parent="#HospitalRes"><div class="card-body" id="HospitalAddress">${i.date[e].Hospital[0].address}<p>${addBadges(i.date[e].Hospital,0)}</p><ul class="list-group"><li class="list-group-item ${i.date[e].Hospital[0]["1stdose"]>0?"list-group-item-success":"list-group-item-secondary"}" id="dose1">${i.date[e].Hospital[0]["1stdose"]}</li><li class="list-group-item ${i.date[e].Hospital[0]["2nddose"]>0?"list-group-item-success":"list-group-item-secondary"}" id="dose2">${i.date[e].Hospital[0]["2nddose"]}</li></ul></div></div></div>`;for(let t=1;t<i.date[e].Hospital.length;t++)a.innerHTML+=`<div class="card" onclick="DelegateClick(${t})"><div class="d-flex card-header ${i.date[e].Hospital[t]["1stdose"]>0||i.date[e].Hospital[t]["2nddose"]>0?"btn-success":"btn-secondary"} align-items-center justify-content-center" id="Hospital${t}" ><h2 class="mb-0" ><button class="btn collapsed" id="HospitalName${t}" type="button" data-toggle="collapse" data-target="#Hospitaldetails${t}" aria-expanded="false" aria-controls="Hospitaldetails${t}">${i.date[e].Hospital[t].name}</button></h2></div><div id="Hospitaldetails${t}" class="collapse" aria-labelledby="Hospital${t}" data-parent="#HospitalRes"><div class="card-body" id="HospitalAddress">${i.date[e].Hospital[t].address}<p>${addBadges(i.date[e].Hospital,t)}</p><ul class="list-group"><li class="list-group-item ${i.date[e].Hospital[t]["1stdose"]>0?"list-group-item-success":"list-group-item-secondary"}" id="dose1">${i.date[e].Hospital[t]["1stdose"]}</li><li class="list-group-item ${i.date[e].Hospital[t]["2nddose"]>0?"list-group-item-success":"list-group-item-secondary"}" id="dose2">${i.date[e].Hospital[t]["2nddose"]}</li></ul></div></div></div>`}else{let t=document.getElementById("MainContent");if(t.innerHTML="",0==i.date[e].Hospital.length)return t.innerHTML+='<div class="d-flex justify-content-start"><div class="p-2"><a href="javascript:GoBackToDateResults()" title="go back" class="btn active" id="gobackanchor"><img src="img/arrow-left.svg" alt="go back"></a></div></div>',void(Button.isClicked("18+")||Button.isClicked("45+")||Button.isClicked("covishield")||Button.isClicked("covaxin")||Button.isClicked("sputnik")||Button.isClicked("free")||Button.isClicked("paid")||Button.isClicked("1stDose")||Button.isClicked("2ndDose")?t.innerHTML+=alert("No Data of Vaccination centers available for current set of filters."):t.innerHTML+=alert("No Data of Vaccination centers available"));t.innerHTML+=`<div class="d-flex justify-content-between" id="dateShift">\n                             <div class="p-2"><a href="javascript:Previousdate()" title="goto previous date" id="previousdateanchor" class="btn active"><img src="img/arrow-left.svg" alt="goto previous date" id="dateshiftleft"></a></div><div class="p-2 font-weight-bold" title="current date" id="currentdate">${i.date[e].value}</div><div class="p-2"><a href="javascript:Nextdate()" title="goto next date" id="nextdateanchor" class="btn active"><img src="img/arrow-right.svg" alt="goto next date" id="dateshiftright"></a></div></div>`,addFilterButtons(t),t.innerHTML+='<div id="hospitalResults"></div>',(t=document.getElementById("hospitalResults")).innerHTML+='<div class="d-flex p-2 align-items-center justify-content-center"><div class="accordion" id="HospitalRes"></div></div>',(t=document.getElementById("HospitalRes")).innerHTML="",t.innerHTML+=`<div class="card " id="ad" data-toggle="popover" onclick="DelegateClick(0)"><div class="d-flex card-header ${i.date[e].Hospital[0]["1stdose"]>0||i.date[e].Hospital[0]["2nddose"]>0?"btn-success":"btn-secondary"} align-items-center justify-content-center" id="Hospital0"><h2 class="mb-0" ><button class="btn collapsed" id="HospitalName0" type="button" data-toggle="collapse" data-target="#Hospitaldetails0" aria-expanded="false" aria-controls="Hospitaldetails0">${i.date[e].Hospital[0].name}</button></h2></div><div id="Hospitaldetails0" class="collapse" aria-labelledby="Hospital0" data-parent="#HospitalRes"><div class="card-body" id="HospitalAddress">${i.date[e].Hospital[0].address}<p>${addBadges(i.date[e].Hospital,0)}</p><ul class="list-group"><li class="list-group-item ${i.date[e].Hospital[0]["1stdose"]>0?"list-group-item-success":"list-group-item-secondary"}" id="dose1">${i.date[e].Hospital[0]["1stdose"]}</li><li class="list-group-item ${i.date[e].Hospital[0]["2nddose"]>0?"list-group-item-success":"list-group-item-secondary"}" id="dose2">${i.date[e].Hospital[0]["2nddose"]}</li></ul></div></div></div>`;for(let a=1;a<i.date[e].Hospital.length;a++)t.innerHTML+=`<div class="card" onclick="DelegateClick(${a})"><div class="d-flex card-header ${i.date[e].Hospital[a]["1stdose"]>0||i.date[e].Hospital[a]["2nddose"]>0?"btn-success":"btn-secondary"} align-items-center justify-content-center" id="Hospital${a}"><h2 class="mb-0"><button class="btn collapsed" id="HospitalName${a}" type="button" data-toggle="collapse" data-target="#Hospitaldetails${a}" aria-expanded="false" aria-controls="Hospitaldetails${a}">${i.date[e].Hospital[a].name}</button></h2></div><div id="Hospitaldetails${a}" class="collapse" aria-labelledby="Hospital${a}" data-parent="#HospitalRes"><div class="card-body" id="HospitalAddress">${i.date[e].Hospital[a].address}<p>${addBadges(i.date[e].Hospital,a)}</p><ul class="list-group"><li class="list-group-item ${i.date[e].Hospital[a]["1stdose"]>0?"list-group-item-success":"list-group-item-secondary"}" id="dose1">${i.date[e].Hospital[a]["1stdose"]}</li><li class="list-group-item ${i.date[e].Hospital[a]["2nddose"]>0?"list-group-item-success":"list-group-item-secondary"}" id="dose2">${i.date[e].Hospital[a]["2nddose"]}</li></ul></div></div></div>`;$('[data-toggle="popover"]').popover({placement:"top",html:!0,content:'<a href="javascript:" id="closePopover" class="close btn"data-dismiss="alert">&times;</a><div class="media-body">click here to get more information about this vaccination center</div>'}),$('[data-toggle="popover"]').popover("show")}}}function addFilterButtons(e){if(void 0===e)return'<div class="d-flex align-items-center justify-content-center" id="filters">\n        <div class="btn-group">\n            <button type="button" id="agefilter" class="btn btn-secondary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n              18+\n            </button>\n            <div class="dropdown-menu">\n              <a class="dropdown-item" id="agefilter1" href="javascript:Button.click(\'18+\')">18+</a>\n              <a class="dropdown-item" id="agefilter2" href="javascript:Button.click(\'45+\')">45+</a>\n            </div>\n        </div>\n        <div class="btn-group">\n            <button type="button" id="vaccinefilter" class="btn btn-secondary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n              COVISHIELD\n            </button>\n            <div class="dropdown-menu">\n                <a class="dropdown-item" id="vaccinefilter1" href="javascript:Button.click(\'covishield)">COVISHIELD</a>\n              <a class="dropdown-item" id="vaccinefilter2"   href="javascript:Button.click(\'covaxin\')">COVAXIN</a>\n              <a class="dropdown-item" id="vaccinefilter3"   href="javascript:Button.click(\'sputnik v\')">SPUTNIK V</a>\n            </div>\n        </div>\n        <div class="btn-group">\n            <button type="button" id="feefilter" class="btn btn-secondary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n              free\n            </button>\n            <div class="dropdown-menu">\n              <a class="dropdown-item" id="feefilter1" href="javascript:Button.click(\'free\')">free</a>\n              <a class="dropdown-item" id="feefilter2" href="javascript:Button.click(\'paid\')">paid</a>\n            </div>\n        </div>\n        <div class="btn-group">\n            <button type="button" id="dosefilter" class="btn btn-secondary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n              1stDose\n            </button>\n            <div class="dropdown-menu">\n              <a class="dropdown-item" id="dosefilter1" href="javascript:Button.click(\'1stDose\')">1stDose</a>\n              <a class="dropdown-item" id="dosefilter2" href="javascript:Button.click(\'2ndDose\')">2ndDose</a>\n            </div>\n        </div>\n    </div>';e.innerHTML+=`<div class="d-flex align-items-center justify-content-center" id="filters">\n        <div class="btn-group">\n            <button type="button" id="agefilter" class="btn ${Button.isClicked("18+")||Button.isClicked("45+")?"Button-clicked":"btn-secondary"} dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n            ${Button.isClicked("18+")?"18+":Button.isClicked("45+")?"45+":"18+"}\n            </button>\n            <div class="dropdown-menu">\n              <a class="dropdown-item" id="agefilter1" href="javascript:Button.click('18+')">18+</a>\n              <a class="dropdown-item" id="agefilter2" href="javascript:Button.click('45+')">45+</a>\n            </div>\n        </div>\n        <div class="btn-group">\n            <button type="button" id="vaccinefilter" class="btn ${Button.isClicked("covishield")||Button.isClicked("covaxin")||Button.isClicked("sputnik")?"Button-clicked":"btn-secondary"} dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n            ${Button.isClicked("covishield")?"COVISHIELD":Button.isClicked("covaxin")?"COVAXIN":Button.isClicked("sputnik v")?"SPUTNIK V":"COVISHIELD"}  \n            </button>\n            <div class="dropdown-menu">\n                <a class="dropdown-item" id="vaccinefilter1" href="javascript:Button.click('covishield')">COVISHIELD</a>\n              <a class="dropdown-item" id="vaccinefilter2"   href="javascript:Button.click('covaxin')">COVAXIN</a>\n              <a class="dropdown-item" id="vaccinefilter3"   href="javascript:Button.click('sputnik v')">SPUTNIK V</a>\n            </div>\n        </div>\n        <div class="btn-group">\n            <button type="button" id="feefilter" class="btn  ${Button.isClicked("free")||Button.isClicked("paid")?"Button-clicked":"btn-secondary"} dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n            ${Button.isClicked("free")?"free":Button.isClicked("paid")?"paid":"free"}\n            </button>\n            <div class="dropdown-menu">\n              <a class="dropdown-item" id="feefilter1" href="javascript:Button.click('free')">free</a>\n              <a class="dropdown-item" id="feefilter2" href="javascript:Button.click('paid')">paid</a>\n            </div>\n        </div>\n        <div class="btn-group">\n            <button type="button" id="dosefilter" class="btn ${Button.isClicked("1stDose")||Button.isClicked("2ndDose")?"Button-clicked":"btn-secondary"} dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n            ${Button.isClicked("1stDose")?"1stDose":Button.isClicked("2ndDose")?"2ndDose":"1stDose"}\n            </button>\n            <div class="dropdown-menu">\n              <a class="dropdown-item" id="dosefilter1" href="javascript:Button.click('1stDose')">1stDose</a>\n              <a class="dropdown-item" id="dosefilter2" href="javascript:Button.click('2ndDose')">2ndDose</a>\n            </div>\n        </div>\n    </div>`}function addBadges(e,t){if(Array.isArray(e)){if(0==e.length)return"";{let i=`<span class="badge badge-info" title="this date has this vaccine available">${e[t].vaccine}</span> `;return i+=`<span class="badge badge-info" title="this date has vaccines available for this age-group">${e[t].min_age+"+"}</span> `,i+=`<span class="badge badge-info" title="this date has vaccines available by this mode of payment">${"Paid"==e[t].fee_type?"Paid(&#x20B9; "+e[t].fees+")":"Free"}</span> `,e[t]["1stdose"]>0&&(i+='<span class="badge badge-info" title="this date has vaccines available for 1stdose of vaccination">1stdose</span> '),e[t]["2nddose"]>0&&(i+='<span class="badge badge-info" title="this date has vaccines available for 2nddose of vaccination">2nddose</span> '),i}}{let t=Object.getOwnPropertyNames(e);var i=null;if(0==t.length)return"";i="";for(let e=0;e<t.length;e++)i+=`<span class="badge badge-info" title="this date has this vaccine available">${t[e]}</span> `;let a=[];for(let s=0;s<t.length;s++){let n=Object.getOwnPropertyNames(e[`${t[s]}`]);for(let e=0;e<n.length;e++)a.includes(n[e])||(a.push(n[e]),i+=`<span class="badge badge-info" title="this date has vaccines available for this age-group">${n[e]+"+"}</span> `)}a=[];for(let s=0;s<t.length;s++){let n=Object.getOwnPropertyNames(e[`${t[s]}`]);for(let d=0;d<n.length;d++){let o=Object.getOwnPropertyNames(e[`${t[s]}`][`${n[d]}`]);for(let l=0;l<o.length;l++){let c=Object.getOwnPropertyNames(e[`${t[s]}`][`${n[d]}`][`${o[l]}`]);for(let r=0;r<c.length;r++)e[`${t[s]}`][`${n[d]}`][`${o[l]}`][`${c[r]}`]>0&&(a.includes(c[r])||(a.push(c[r]),i+=`<span class="badge badge-info" title="this date has vaccines available by this mode of payment">${c[r]}</span> `))}}}a=[];for(let s=0;s<t.length;s++){let n=Object.getOwnPropertyNames(e[`${t[s]}`]);for(let d=0;d<n.length;d++){let o=Object.getOwnPropertyNames(e[`${t[s]}`][`${n[d]}`]);for(let e=0;e<o.length;e++)a.includes(o[e])||(a.push(o[e]),i+=`<span class="badge badge-info" title="this date has vaccines available for ${o[e]}">${o[e]}</span> `)}}return i}}function DelegateClick(e){if("number"==typeof e){let t=document.getElementById(`HospitalName${e}`);t&&t.click()}}function ConvertData(e){let t=[];for(let i=0;i<e.length;i++)for(let a=0;a<e[i].sessions.length;a++)t.includes(e[i].sessions[a].date)||t.push(e[i].sessions[a].date);var i={},a=[];let s=["COVISHIELD","COVAXIN","SPUTNIK V"],n=[18,45];for(let i=0;i<t.length;i++){let l={};var d=[];l.value=t[i],l.total=0;for(let a=0;a<e.length;a++)for(let c=0;c<e[a].sessions.length;c++){if(e[a].sessions[c].date!=t[i])continue;var o={};let r={},p={},u={},v={},m={};if(u.free=0,u.paid=0,v.free=0,v.paid=0,o.address=e[a].address,o.name=e[a].name,o.vaccine=e[a].sessions[c].vaccine,o.fee_type=e[a].fee_type,o["1stdose"]=e[a].sessions[c].available_capacity_dose1,o["2nddose"]=e[a].sessions[c].available_capacity_dose2,o.min_age=e[a].sessions[c].min_age_limit,"vaccine_fees"in e[a])for(let t=e[a].vaccine_fees.length-1;t>=0;t--)if(e[a].vaccine_fees[t].vaccine=o.vaccine){o.fees=Number(e[a].vaccine_fees[t].fee);break}d.push(o),"Free"==e[a].fee_type?(u.free+=e[a].sessions[c].available_capacity_dose1,v.free+=e[a].sessions[c].available_capacity_dose2,l.total+=u.free+v.free):(u.paid+=e[a].sessions[c].available_capacity_dose1,v.paid+=e[a].sessions[c].available_capacity_dose2,l.total+=u.paid+v.paid),m.hasOwnProperty("1stdose")?(m["1stdose"].free+=u.free,m["1stdose"].paid+=u.paid):m["1stdose"]=u,m.hasOwnProperty("2nddose")?(m["2nddose"].free+=v.free,m["2nddose"].paid+=v.paid):m["2nddose"]=v;for(let t=0;t<n.length;t++)e[a].sessions[c].min_age_limit==n[t]&&(p.hasOwnProperty(n[t])?(p[`${n[t]}`]["1stdose"].free+=m["1stdose"].free,p[`${n[t]}`]["1stdose"].paid+=m["1stdose"].paid,p[`${n[t]}`]["2nddose"].free+=m["2nddose"].free,p[`${n[t]}`]["2nddose"].paid+=m["2nddose"].paid):p[`${n[t]}`]=m);for(let t=0;t<s.length;t++)if(e[a].sessions[c].vaccine==s[t])if(r.hasOwnProperty(s[t]))for(let e=0;e<n.length;e++)r[s[t]].hasOwnProperty(n[e])&&p.hasOwnProperty(n[e])&&(r[s[t]][n[e]]["1stdose"].free+=p[n[e]]["1stdose"].free,r[s[t]][n[e]]["1stdose"].paid+=p[n[e]]["1stdose"].paid,r[s[t]][n[e]]["2nddose"].free+=p[n[e]]["2nddose"].free,r[s[t]][n[e]]["2nddose"].paid+=p[n[e]]["2nddose"].paid);else r[s[t]]=p;if(l.hasOwnProperty("vaccine")){for(let e=0;e<s.length;e++)if(l.vaccine.hasOwnProperty(s[e])){let t=Object.getOwnPropertyNames(r);if(r.hasOwnProperty(s[e]))l.vaccine[s[e]].hasOwnProperty(18)?r[s[e]].hasOwnProperty(18)?(l.vaccine[s[e]][18]["1stdose"].free+=r[s[e]][18]["1stdose"].free,l.vaccine[s[e]][18]["1stdose"].paid+=r[s[e]][18]["1stdose"].paid,l.vaccine[s[e]][18]["2nddose"].free+=r[s[e]][18]["2nddose"].free,l.vaccine[s[e]][18]["2nddose"].paid+=r[s[e]][18]["2nddose"].paid):!l.vaccine[s[e]].hasOwnProperty(45)&&r[s[e]].hasOwnProperty(45)?l.vaccine[s[e]][45]=r[s[e]][45]:l.vaccine[s[e]].hasOwnProperty(45)&&r[s[e]].hasOwnProperty(45)&&(l.vaccine[s[e]][45]["1stdose"].free+=r[s[e]][45]["1stdose"].free,l.vaccine[s[e]][45]["1stdose"].paid+=r[s[e]][45]["1stdose"].paid,l.vaccine[s[e]][45]["2nddose"].free+=r[s[e]][45]["2nddose"].free,l.vaccine[s[e]][45]["2nddose"].paid+=r[s[e]][45]["2nddose"].paid):l.vaccine[s[e]].hasOwnProperty(45)&&(r[s[e]].hasOwnProperty(45)?(l.vaccine[s[e]][45]["1stdose"].free+=r[s[e]][45]["1stdose"].free,l.vaccine[s[e]][45]["1stdose"].paid+=r[s[e]][45]["1stdose"].paid,l.vaccine[s[e]][45]["2nddose"].free+=r[s[e]][45]["2nddose"].free,l.vaccine[s[e]][45]["2nddose"].paid+=r[s[e]][45]["2nddose"].paid):!l.vaccine[s[e]].hasOwnProperty(18)&&r[s[e]].hasOwnProperty(18)?l.vaccine[s[e]][18]=r[s[e]][18]:l.vaccine[s[e]].hasOwnProperty(18)&&r[s[e]].hasOwnProperty(18)&&(l.vaccine[s[e]][18]["1stdose"].free+=r[s[e]][18]["1stdose"].free,l.vaccine[s[e]][18]["1stdose"].paid+=r[s[e]][18]["1stdose"].paid,l.vaccine[s[e]][18]["2nddose"].free+=r[s[e]][18]["2nddose"].free,l.vaccine[s[e]][18]["2nddose"].paid+=r[s[e]][18]["2nddose"].paid));else if(l.vaccine.hasOwnProperty(`${t[0]}`))if(l.vaccine[`${t[0]}`].hasOwnProperty(18)&&r[`${t[0]}`].hasOwnProperty(18))l.vaccine[`${t[0]}`][18]["1stdose"].free+=r[`${t[0]}`][18]["1stdose"].free,l.vaccine[`${t[0]}`][18]["1stdose"].paid+=r[`${t[0]}`][18]["1stdose"].paid,l.vaccine[`${t[0]}`][18]["2nddose"].free+=r[`${t[0]}`][18]["2nddose"].free,l.vaccine[`${t[0]}`][18]["2nddose"].paid+=r[`${t[0]}`][18]["2nddose"].paid;else if(l.vaccine[`${t[0]}`].hasOwnProperty(45)&&r[`${t[0]}`].hasOwnProperty(45))l.vaccine[`${t[0]}`][45]["1stdose"].free+=r[`${t[0]}`][45]["1stdose"].free,l.vaccine[`${t[0]}`][45]["1stdose"].paid+=r[`${t[0]}`][45]["1stdose"].paid,l.vaccine[`${t[0]}`][45]["2nddose"].free+=r[`${t[0]}`][45]["2nddose"].free,l.vaccine[`${t[0]}`][45]["2nddose"].paid+=r[`${t[0]}`][45]["2nddose"].paid;else{let e=Object.getOwnPropertyNames(r[`${t[0]}`]);l.vaccine[`${t[0]}`][`${e}`]=r[`${t[0]}`][`${e}`]}else l.vaccine[`${t[0]}`]=r[`${t[0]}`]}}else l.vaccine=r}l.Hospital=d,a.push(l)}return a.sort((e,t)=>{let i=e.value.split("-"),a=t.value.split("-");return new Date(+i[2],i[1]-1,+i[0])-new Date(+a[2],a[1]-1,+a[0])}),i.date=a,i}function validatePin(e){return new RegExp("^[1-9]{1}[0-9]{2}[0-9]{3}$").test(e)}function PinValid(e){if(validatePin(1==e?document.getElementById("pininput1").value:document.getElementById("pininput0").value)){document.getElementById(`PinButton${e}`).removeAttribute("disabled");let t=0;(t=1==e?document.getElementById("pininput1"):document.getElementById("pininput0")).setAttribute("class","form-control mr-sm-2 bg-white text-black");let i=document.getElementById("invalid-feedback");i&&i.remove()}else{document.getElementById(`PinButton${e}`).setAttribute("disabled","disabled");let t=document.getElementById("dateResults");t&&(t.innerHTML="")}}
